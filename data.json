{
  "schemas": {
    "User": {
      "nom": { "type": "String" },
      "prenom": { "type": "String" },
      "email": { "type": "String", "required": true, "unique": true },
      "password": { "type": "String", "required": true },
      "createdAt": { "type": "Date", "default": "Date.now" },
      "updatedAt": { "type": "Date", "default": "Date.now" }
    },

    "RoleAssignment": {
      "user": { "type": "ObjectId", "ref": "User", "required": true },
      "role": { "type": "Number", "enum": [0, 1, 2], "required": true },
      "adminProfile": { "type": "ObjectId", "ref": "AdminProfile" },
      "acheteurProfile": { "type": "ObjectId", "ref": "AcheteurProfile" },
      "boutiqueProfile": { "type": "ObjectId", "ref": "BoutiqueProfile" },
      "createdAt": { "type": "Date", "default": "Date.now" },
      "updatedAt": { "type": "Date", "default": "Date.now" }
    },

    "AdminProfile": {
      "name": { "type": "String", "required": true },
      "createdAt": { "type": "Date", "default": "Date.now" },
      "updatedAt": { "type": "Date", "default": "Date.now" }
    },

    "AcheteurProfile": {
      "name": { "type": "String", "required": true },
      "photo": { "type": "String" },
      "createdAt": { "type": "Date", "default": "Date.now" },
      "updatedAt": { "type": "Date", "default": "Date.now" }
    },

    "BoutiqueProfile": {
      "name": { "type": "String", "required": true },
      "address": { "type": "String" },
      "phone": { "type": "String" },
      "isValidated": { "type": "Boolean", "default": false },
      "createdAt": { "type": "Date", "default": "Date.now" },
      "updatedAt": { "type": "Date", "default": "Date.now" }
    },

    "BoutiqueUser": {
      "user": { "type": "ObjectId", "ref": "User", "required": true },
      "boutique": { "type": "ObjectId", "ref": "BoutiqueProfile", "required": true },
      "roleDansBoutique": { "type": "Number", "enum": [0, 1, 2], "required": true },
      "createdAt": { "type": "Date", "default": "Date.now" },
      "updatedAt": { "type": "Date", "default": "Date.now" }
    },

    "Categorie": {
      "name": { "type": "String", "required": true },
      "isValidated": { "type": "Boolean", "default": false },
      "createdAt": { "type": "Date", "default": "Date.now" },
      "updatedAt": { "type": "Date", "default": "Date.now" }
    },

    "Produit": {
      "name": { "type": "String", "required": true },
      "categorie": { "type": "ObjectId", "ref": "Categorie", "required": true },
      "price": { "type": "Number", "required": true },
      "image": { "type": "String" },
      "disponible": { "type": "Boolean", "default": true },
      "quantiteStock": { "type": "Number", "default": 0 },
      "boutiqueProfile": { "type": "ObjectId", "ref": "BoutiqueProfile", "required": true },
      "createdAt": { "type": "Date", "default": "Date.now" },
      "updatedAt": { "type": "Date", "default": "Date.now" }
    },

    "Stock": {
      "produit": { "type": "ObjectId", "ref": "Produit", "required": true },
      "quantity": { "type": "Number", "required": true },
      "movementType": { "type": "Number", "enum": [0, 1], "required": true }, 
      "dateStock": { "type": "Date", "default": "Date.now" },
      "boutiqueProfile": { "type": "ObjectId", "ref": "BoutiqueProfile", "required": true },
      "updatedAt": { "type": "Date", "default": "Date.now" }
    },

    "Commission": {
      "pourcentage": { "type": "Number", "required": true },
      "dateChangement": { "type": "Date", "required": true },
      "adminProfile": { "type": "ObjectId", "ref": "AdminProfile", "required": true },
      "updatedAt": { "type": "Date", "default": "Date.now" }
    },

    "Avis": {
      "note": { "type": "Number", "required": true },
      "commentaire": { "type": "String" },
      "type": { "type": "Number", "enum": [0, 1], "required": true }, 
      "produit": { "type": "ObjectId", "ref": "Produit" },
      "boutiqueProfile": { "type": "ObjectId", "ref": "BoutiqueProfile" },
      "acheteurProfile": { "type": "ObjectId", "ref": "AcheteurProfile", "required": true },
      "createdAt": { "type": "Date", "default": "Date.now" }
    },

    "Panier": {
      "acheteurProfile": { "type": "ObjectId", "ref": "AcheteurProfile", "required": true },
      "produits": [{ "type": "ObjectId", "ref": "Produit", "required": true }],
      "produitsSnapshot": [{ "type": "Mixed" }], 
      "dateValidation": { "type": "Date" },
      "updatedAt": { "type": "Date", "default": "Date.now" }
    },

    "Commande": {
      "panier": { "type": "ObjectId", "ref": "Panier", "required": true },
      "statut": { "type": "Number", "enum": [0, 1, 2], "required": true }, 
      "modeLivraison": { "type": "Number", "enum": [0, 1], "required": true }, 
      "dateAchat": { "type": "Date", "default": "Date.now" },
      "produitsSnapshot": [{ "type": "Mixed" }],
      "updatedAt": { "type": "Date", "default": "Date.now" }
    },

    "Notification": {
      "notification": { "type": "String", "required": true },
      "id_boutique": { "type": "ObjectId", "ref": "BoutiqueProfile" },
      "id_user": { "type": "ObjectId", "ref": "User" },
      "id_produit": { "type": "ObjectId", "ref": "Produit" },
      "createdAt": { "type": "Date", "default": "Date.now" }
    },

    "Achat": {
      "date": { "type": "Date", "required": true },
      "id_user": { "type": "ObjectId", "ref": "User", "required": true },
      "id_produit": { "type": "ObjectId", "ref": "Produit", "required": true },
      "id_boutique": { "type": "ObjectId", "ref": "BoutiqueProfile", "required": true },
      "quantite": { "type": "Number", "required": true },
      "createdAt": { "type": "Date", "default": "Date.now" }
    }
  }
}
